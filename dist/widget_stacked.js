"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Widget=function(){function s(t,e,i,n){return[t,e].map(function(t){return(e=t)?e.map(function(t){return t.label=i[t.id].label,t.short_label=i[t.id].short_label,t.color=i[t.id].color,t.political_pos=i[t.id].political_pos,t}).sort(function(t,e){return t.political_pos-e.political_pos}):null;var e})}function l(c,u,t,p,e){return t.map(function(t,o){if(t){var s=function(t){return t.percent="0%",t.delay="0ms",t},l=function(t){return parseFloat((t/c*100).toFixed(2))};if(e)return t.map(function(t){return s(t)});var a=0,r=0;return t.map(function(t,e){var i=0<p.length,n=-1===p.indexOf(t.id);return i&&n?s(t):function(t,e){if("unassigned"===t.id)t.val=parseFloat((c-a).toFixed(2)),t.percent=parseFloat((100-r).toFixed(2))+"%";else{var i=t.seats>=u?t.seats:0;t.val=i,t.percent=l(i)+"%",a+=t.val,r+=l(i)}return t.delay=50*e+"ms",t.tt=t.id+"_"+o,t}(t,e)})}})}var t={initialRendering:function(t){this.set({hideAll:!1})},filterBy:function(t,e,i){var n=this;0<e.length&&n.set({hideAll:!0}),setTimeout(function(){n.set({filterList:t,hideAll:!1})},250)},showTooltip:function(t,e,i){this.set({tooltipTop:t.offsetY+10,tooltipLeft:t.offsetX+10,visibleTooltip:e})},hideTooltip:function(){this.set({visibleTooltip:!1})}};function T(t,e){var i,n,o,s,l,a=e.seats/2+1;return{c:function(){i=M("div"),n=F("Maggioranza: "),o=F(a),s=F(" seggi su "),l=F(e.seats),this.h()},h:function(){i.className="ep-horizontal-staked-median"},m:function(t,e){E(i,t,e),j(n,i),j(o,i),j(s,i),j(l,i)},p:function(t,e){t.seats&&a!==(a=e.seats/2+1)&&(o.data=a),t.seats&&(l.data=e.seats)},u:function(){O(i)},d:c}}function N(i,t){var n,o,s,l,a,r,c,u,p,d=t.list,f=(t.each_value,t.index,d.val),h="percent"===t.type?"%":"",v=d.label,m="unassigned"!==d.id&&"centro-destra"!==d.id&&"centro-sinistra"!==d.id&&_(i,t);return{c:function(){n=M("div"),o=F(f),s=F(h),l=F("\r\n               "),a=M("div"),m&&m.c(),r=F("\r\n                  "),c=M("h4"),u=F(v),this.h()},h:function(){a.className="tooltip",k(a,"top",t.tooltipTop+"px"),k(a,"left",t.tooltipLeft+"px"),w(n,"mousemove",e),w(n,"mouseleave",y),n.className=p="ep-horizontal-stacked-list box-"+d.id+" "+(t.visibleTooltip===d.tt?"show-tooltip":""),k(n,"background",d.color),k(n,"width",d.percent),k(n,"transition-delay",d.delay),n._svelte={component:i,each_value:t.each_value,index:t.index}},m:function(t,e){E(n,t,e),j(o,n),j(s,n),j(l,n),j(a,n),m&&m.m(a,null),j(r,a),j(c,a),j(u,c)},p:function(t,e){d=e.list,e.each_value,e.index,t.lists&&f!==(f=d.val)&&(o.data=f),t.type&&h!==(h="percent"===e.type?"%":"")&&(s.data=h),"unassigned"!==d.id&&"centro-destra"!==d.id&&"centro-sinistra"!==d.id?m?m.p(t,e):((m=_(i,e)).c(),m.m(a,r)):m&&(m.u(),m.d(),m=null),t.lists&&v!==(v=d.label)&&(u.data=v),t.tooltipTop&&k(a,"top",e.tooltipTop+"px"),t.tooltipLeft&&k(a,"left",e.tooltipLeft+"px"),(t.lists||t.visibleTooltip)&&p!==(p="ep-horizontal-stacked-list box-"+d.id+" "+(e.visibleTooltip===d.tt?"show-tooltip":""))&&(n.className=p),t.lists&&(k(n,"background",d.color),k(n,"width",d.percent),k(n,"transition-delay",d.delay)),n._svelte.each_value=e.each_value,n._svelte.index=e.index},u:function(){O(n),m&&m.u()},d:function(){m&&m.d(),z(n,"mousemove",e),z(n,"mouseleave",y)}}}function _(t,e){var i,n,o,s=e.list;e.each_value,e.index;return{c:function(){i=M("img"),this.h()},h:function(){i.src=n=e.imagePath+"/"+s.id+".png",i.alt=o=s.label},m:function(t,e){E(i,t,e)},p:function(t,e){s=e.list,e.each_value,e.index,(t.imagePath||t.lists)&&n!==(n=e.imagePath+"/"+s.id+".png")&&(i.src=n),t.lists&&o!==(o=s.label)&&(i.alt=o)},u:function(){O(i)},d:c}}function f(t,e){var i,n,o,s,l,a=e.Math.ceil(e.seats2/2);return{c:function(){i=M("div"),n=F("Maggioranza: "),o=F(a),s=F(" seggi su "),l=F(e.seats2),this.h()},h:function(){i.className="ep-horizontal-staked-median"},m:function(t,e){E(i,t,e),j(n,i),j(o,i),j(s,i),j(l,i)},p:function(t,e){(t.Math||t.seats2)&&a!==(a=e.Math.ceil(e.seats2/2))&&(o.data=a),t.seats2&&(l.data=e.seats2)},u:function(){O(i)},d:c}}function h(i,t){var n,o,s,l,a,r,c,u,p,d=t.list,f=(t.each_value_1,t.list_index,d.val),h="percent"===t.type?"%":"",v=d.label,m="unassigned"!==d.id&&"centro-destra"!==d.id&&"centro-sinistra"!==d.id&&g(i,t);return{c:function(){n=M("div"),o=F(f),s=F(h),l=F("\r\n                  "),a=M("div"),m&&m.c(),r=F("\r\n                     "),c=M("h4"),u=F(v),this.h()},h:function(){a.className="tooltip",k(a,"top",t.tooltipTop+"px"),k(a,"left",t.tooltipLeft+"px"),w(n,"mousemove",x),w(n,"mouseleave",b),n.className=p="ep-horizontal-stacked-list box-"+d.id+" "+(t.visibleTooltip===d.tt?"show-tooltip":""),k(n,"background",d.color),k(n,"width",d.percent),k(n,"transition-delay",d.delay),n._svelte={component:i,each_value_1:t.each_value_1,list_index:t.list_index}},m:function(t,e){E(n,t,e),j(o,n),j(s,n),j(l,n),j(a,n),m&&m.m(a,null),j(r,a),j(c,a),j(u,c)},p:function(t,e){d=e.list,e.each_value_1,e.list_index,t.lists&&f!==(f=d.val)&&(o.data=f),t.type&&h!==(h="percent"===e.type?"%":"")&&(s.data=h),"unassigned"!==d.id&&"centro-destra"!==d.id&&"centro-sinistra"!==d.id?m?m.p(t,e):((m=g(i,e)).c(),m.m(a,r)):m&&(m.u(),m.d(),m=null),t.lists&&v!==(v=d.label)&&(u.data=v),t.tooltipTop&&k(a,"top",e.tooltipTop+"px"),t.tooltipLeft&&k(a,"left",e.tooltipLeft+"px"),(t.lists||t.visibleTooltip)&&p!==(p="ep-horizontal-stacked-list box-"+d.id+" "+(e.visibleTooltip===d.tt?"show-tooltip":""))&&(n.className=p),t.lists&&(k(n,"background",d.color),k(n,"width",d.percent),k(n,"transition-delay",d.delay)),n._svelte.each_value_1=e.each_value_1,n._svelte.list_index=e.list_index},u:function(){O(n),m&&m.u()},d:function(){m&&m.d(),z(n,"mousemove",x),z(n,"mouseleave",b)}}}function g(t,e){var i,n,o,s=e.list;e.each_value_1,e.list_index;return{c:function(){i=M("img"),this.h()},h:function(){i.src=n=e.imagePath+"/"+s.id+".png",i.alt=o=s.label},m:function(t,e){E(i,t,e)},p:function(t,e){s=e.list,e.each_value_1,e.list_index,(t.imagePath||t.lists)&&n!==(n=e.imagePath+"/"+s.id+".png")&&(i.src=n),t.lists&&o!==(o=s.label)&&(i.alt=o)},u:function(){O(i)},d:c}}function S(s,t){for(var n,l,o,a,r,c,u=t.title2?t.title2:"",p="seats"==t.type&&f(0,t),e=t.lists[1],d=[],i=0;i<e.length;i+=1)d[i]=h(s,C(C({},t),{each_value_1:e,list:e[i],list_index:i}));return{c:function(){n=M("h4"),l=F(u),o=F("\r\n         "),p&&p.c(),a=F("\r\n         "),r=M("div");for(var t=0;t<d.length;t+=1)d[t].c();this.h()},h:function(){r.className=c="ep-horizontal-stacked-track "+("percent"===t.type?"":"show-median")},m:function(t,e){E(n,t,e),j(l,n),E(o,t,e),p&&p.m(t,e),E(a,t,e),E(r,t,e);for(var i=0;i<d.length;i+=1)d[i].m(r,null)},p:function(t,e){t.title2&&u!==(u=e.title2?e.title2:"")&&(l.data=u),"seats"==e.type?p?p.p(t,e):((p=f(0,e)).c(),p.m(a.parentNode,a)):p&&(p.u(),p.d(),p=null);var i=e.lists[1];if(t.lists||t.visibleTooltip||t.type||t.tooltipTop||t.tooltipLeft||t.imagePath){for(var n=0;n<i.length;n+=1){var o=C(C({},e),{each_value_1:i,list:i[n],list_index:n});d[n]?d[n].p(t,o):(d[n]=h(s,o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].u(),d[n].d();d.length=i.length}t.type&&c!==(c="ep-horizontal-stacked-track "+("percent"===e.type?"":"show-median"))&&(r.className=c)},u:function(){O(n),O(o),p&&p.u(),O(a),O(r);for(var t=0;t<d.length;t+=1)d[t].u()},d:function(){p&&p.d(),R(d)}}}function u(t,e){var i,n,o=e.coalition,s=(e.each_value_2,e.coalition_index,o.label);return{c:function(){i=M("div"),n=F(s),this.h()},h:function(){w(i,"click",r),i.className="ep-coalition-item",i._svelte={component:t,each_value_2:e.each_value_2,coalition_index:e.coalition_index}},m:function(t,e){E(i,t,e),j(n,i)},p:function(t,e){o=e.coalition,e.each_value_2,e.coalition_index,t.simulations&&s!==(s=o.label)&&(n.data=s),i._svelte.each_value_2=e.each_value_2,i._svelte.coalition_index=e.coalition_index},u:function(){O(i)},d:function(){z(i,"click",r)}}}function P(s,t){for(var n,o,l,a,e=t.simulations,r=[],i=0;i<e.length;i+=1)r[i]=u(s,C(C({},t),{each_value_2:e,coalition:e[i],coalition_index:i}));function c(t){s.set({filterList:[]})}return{c:function(){(n=M("h4")).textContent="Possibili Coalizioni",o=F("\r\n            ");for(var t=0;t<r.length;t+=1)r[t].c();l=F("\r\n            "),(a=M("div")).textContent="Vedi tutti",this.h()},h:function(){n.className="tit",w(a,"click",c),a.className="ep-coalition-item"},m:function(t,e){E(n,t,e),E(o,t,e);for(var i=0;i<r.length;i+=1)r[i].m(t,e);E(l,t,e),E(a,t,e)},p:function(t,e){var i=e.simulations;if(t.simulations||t.filterList||t.hideAll){for(var n=0;n<i.length;n+=1){var o=C(C({},e),{each_value_2:i,coalition:i[n],coalition_index:n});r[n]?r[n].p(t,o):(r[n]=u(s,o),r[n].c(),r[n].m(l.parentNode,l))}for(;n<r.length;n+=1)r[n].u(),r[n].d();r.length=i.length}},u:function(){O(n),O(o);for(var t=0;t<r.length;t+=1)r[t].u();O(l),O(a)},d:function(){R(r),z(a,"click",c)}}}function A(t,e){var i,n;return{c:function(){i=M("small"),n=F(e.dataSource),this.h()},h:function(){i.className="data-source"},m:function(t,e){E(i,t,e),j(n,i)},p:function(t,e){t.dataSource&&(n.data=e.dataSource)},u:function(){O(i)},d:c}}function B(i,t){var n,o=t.list,s=(t.each_value_3,t.list_index_1,0<o.val&&a(i,t));return{c:function(){s&&s.c(),n=document.createComment("")},m:function(t,e){s&&s.m(t,e),E(n,t,e)},p:function(t,e){o=e.list,e.each_value_3,e.list_index_1,0<o.val?s?s.p(t,e):((s=a(i,e)).c(),s.m(n.parentNode,n)):s&&(s.u(),s.d(),s=null)},u:function(){s&&s.u(),O(n)},d:function(){s&&s.d()}}}function a(t,e){var i,n,o,s=e.list,l=(e.each_value_3,e.list_index_1,s.label);return{c:function(){i=M("div"),n=M("span"),o=F(l),this.h()},h:function(){n.className="ep-legend-color",k(n,"background",s.color),i.className="ep-legend-item"},m:function(t,e){E(i,t,e),j(n,i),j(o,i)},p:function(t,e){s=e.list,e.each_value_3,e.list_index_1,t.lists&&k(n,"background",s.color),t.lists&&l!==(l=s.label)&&(o.data=l)},u:function(){O(i)},d:c}}function e(t){var e=this._svelte.component,i=this._svelte.each_value,n=this._svelte.index,o=i[n];e.showTooltip(t,o.tt,n)}function y(t){this._svelte.component.hideTooltip()}function x(t){var e=this._svelte.component,i=this._svelte.each_value_1[this._svelte.list_index];e.showTooltip(t,i.tt)}function b(t){this._svelte.component.hideTooltip()}function r(t){var e=this._svelte.component,i=this._svelte.each_value_2[this._svelte.coalition_index],n=e.get();e.filterBy(i.code,n.filterList,n.hideAll)}function i(t){var e,i,n;i=t,(e=this)._handlers=Object.create(null),e._bind=i._bind,e.options=i,e.root=i.root||e,e.store=e.root.store||i.store,this._state=C(C({Math:Math},{seats:100,type:"percent",threshold:3,filterList:[],hideAll:!0,visibleTooltip:!1,tooltipTop:0,tooltipLeft:0}),t.data),this._recompute({type:1,seats:1,figures2:1,figures:1,configList:1,threshold:1,actualSeats:1,rawList:1,filterList:1,hideAll:1,coalitions:1},this._state),document.getElementById("svelte-1p9y4f8-style")||((n=M("style")).id="svelte-1p9y4f8-style",n.textContent=".svelte-1p9y4f8.ep-horizontal-wrapper,.svelte-1p9y4f8 .ep-horizontal-wrapper{font-family:'open sans condensed'}.svelte-1p9y4f8.ep-horizontal-stacked,.svelte-1p9y4f8 .ep-horizontal-stacked{border-bottom:3px solid #ddd;margin-bottom:1em;padding-bottom:1em}.svelte-1p9y4f8.ep-horizontal-stacked h4,.svelte-1p9y4f8 .ep-horizontal-stacked h4{margin-bottom:-1em}.svelte-1p9y4f8.ep-horizontal-stacked-track,.svelte-1p9y4f8 .ep-horizontal-stacked-track{position:relative;background:#efefef;border:2px solid #999;height:50px;padding:2px;margin:7px 0 1em;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.8);display:flex;justify-content:flex-start;align-items:stretch}.svelte-1p9y4f8.ep-horizontal-stacked-track.show-median:after,.svelte-1p9y4f8 .ep-horizontal-stacked-track.show-median:after{content:'';position:absolute;top:-10px;left:50%;bottom:-10px;width:0;border-left:2px solid #999;outline:2px solid #fff;margin-left:-1px}.svelte-1p9y4f8.ep-horizontal-staked-median,.svelte-1p9y4f8 .ep-horizontal-staked-median{display:inline-block;font-size:.7em;color:#999;padding:0 6px;position:relative;left:50%;transform:translateX(-50%);background:#fff;border:2px solid #999;color:#666;border-radius:4px;z-index:2}.svelte-1p9y4f8.ep-horizontal-stacked-list,.svelte-1p9y4f8 .ep-horizontal-stacked-list{display:flex;justify-content:center;align-items:center;text-align:center;outline:2px solid #fff;overflow:hidden;transition:all 250ms ease-out;transform-origin:top left;position:relative;overflow:hidden;cursor:pointer}.svelte-1p9y4f8.ep-horizontal-stacked-list.show-tooltip,.svelte-1p9y4f8 .ep-horizontal-stacked-list.show-tooltip{overflow:visible}.svelte-1p9y4f8.ep-stacked-dashboard,.svelte-1p9y4f8 .ep-stacked-dashboard{display:flex;justify-content:space-between}.svelte-1p9y4f8.ep-filter-coalitions,.svelte-1p9y4f8 .ep-filter-coalitions{text-align:center;margin:1em}.svelte-1p9y4f8.ep-filter-coalitions .tit,.svelte-1p9y4f8 .ep-filter-coalitions .tit{margin:0}.svelte-1p9y4f8.ep-coalition-item,.svelte-1p9y4f8 .ep-coalition-item{font-size:.7em;display:inline-block;border:1px solid #ddd;padding:0 5px;margin:0 4px;border-radius:4px;text-transform:uppercase;background:#f2f2f2;cursor:pointer}.svelte-1p9y4f8.ep-legend,.svelte-1p9y4f8 .ep-legend{box-sizing:border-box;padding:1em;border:1px solid #dfdfdf;text-align:justify;background:#f2f2f2;border-radius:4px}.svelte-1p9y4f8.ep-legend-item,.svelte-1p9y4f8 .ep-legend-item{display:inline-block;font-family:sans-serif;font-size:11px;line-height:15px;text-transform:uppercase;margin:0;padding:0px 15px 0 17px;position:relative}.svelte-1p9y4f8.ep-legend-color,.svelte-1p9y4f8 .ep-legend-color{display:inline-block;width:14px;height:14px;margin-right:5px;border-radius:50%;position:absolute;left:0;top:0}.svelte-1p9y4f8.tooltip,.svelte-1p9y4f8 .tooltip{position:absolute;background:rgba(255,255,255,.9);padding:.4em;z-index:20;border-radius:3px;opacity:0;transform:scale(0.5);transition:transform 150ms ease-in;text-align:center;box-shadow:4px 5px 10px -7px #000}.svelte-1p9y4f8.show-tooltip .tooltip,.svelte-1p9y4f8 .show-tooltip .tooltip{opacity:1;transform:scale(1)}.svelte-1p9y4f8.tooltip h4,.svelte-1p9y4f8 .tooltip h4{white-space:nowrap;color:#444;text-shadow:none;margin:0}.svelte-1p9y4f8.tooltip img,.svelte-1p9y4f8 .tooltip img{display:block;width:50px;margin:0 auto;border-radius:50%}.svelte-1p9y4f8.data-source,.svelte-1p9y4f8 .data-source{display:block;text-align:right;font-size:.8em;color:#999;font-family:sans-serif;padding:.5em}@media(max-width:850px){.svelte-1p9y4f8.ep-horizontal-stacked h4,.svelte-1p9y4f8 .ep-horizontal-stacked h4{margin-bottom:auto}}",j(n,document.head));var o=this;t.root||(this._oncreate=[]),this._fragment=function(a,e){for(var n,r,o,c,s,u,p,d,l,f,h,v,m,_,g,y="seats"==e.type&&T(0,e),t=e.lists[0],x=[],i=0;i<t.length;i+=1)x[i]=N(a,C(C({},e),{each_value:t,list:t[i],index:i}));var b=e.bothBranches&&S(a,e),k=0<e.simulations.length&&P(a,e),w=e.dataSource&&A(0,e),z=e.lists[0],L=[];for(i=0;i<z.length;i+=1)L[i]=B(a,C(C({},e),{each_value_3:z,list:z[i],list_index_1:i}));return{c:function(){n=M("div"),r=M("div"),o=M("h4"),c=F(e.title),s=F("\r\n      "),y&&y.c(),u=F("\r\n      "),p=M("div");for(var t=0;t<x.length;t+=1)x[t].c();for(l=F("\r\n      "),b&&b.c(),f=F("\r\n      "),h=M("div"),k&&k.c(),v=F("\r\n      "),w&&w.c(),m=F("\r\n      "),_=M("div"),g=M("div"),t=0;t<L.length;t+=1)L[t].c();this.h()},h:function(){p.className=d="ep-horizontal-stacked-track "+("percent"===e.type?"":"show-median"),h.className="ep-filter-coalitions",g.className="ep-legend",_.className="ep-stacked-dashboard",r.className="ep-horizontal-stacked",n.className="ep-horizontal-wrapper svelte-1p9y4f8"},m:function(t,e){E(n,t,e),j(r,n),j(o,r),j(c,o),j(s,r),y&&y.m(r,null),j(u,r),j(p,r);for(var i=0;i<x.length;i+=1)x[i].m(p,null);for(j(l,r),b&&b.m(r,null),j(f,r),j(h,r),k&&k.m(h,null),j(v,r),w&&w.m(r,null),j(m,r),j(_,r),j(g,_),i=0;i<L.length;i+=1)L[i].m(g,null)},p:function(t,e){t.title&&(c.data=e.title),"seats"==e.type?y?y.p(t,e):((y=T(0,e)).c(),y.m(r,u)):y&&(y.u(),y.d(),y=null);var i=e.lists[0];if(t.lists||t.visibleTooltip||t.type||t.tooltipTop||t.tooltipLeft||t.imagePath){for(var n=0;n<i.length;n+=1){var o=C(C({},e),{each_value:i,list:i[n],index:n});x[n]?x[n].p(t,o):(x[n]=N(a,o),x[n].c(),x[n].m(p,null))}for(;n<x.length;n+=1)x[n].u(),x[n].d();x.length=i.length}t.type&&d!==(d="ep-horizontal-stacked-track "+("percent"===e.type?"":"show-median"))&&(p.className=d),e.bothBranches?b?b.p(t,e):((b=S(a,e)).c(),b.m(r,f)):b&&(b.u(),b.d(),b=null),0<e.simulations.length?k?k.p(t,e):((k=P(a,e)).c(),k.m(h,null)):k&&(k.u(),k.d(),k=null),e.dataSource?w?w.p(t,e):((w=A(0,e)).c(),w.m(r,m)):w&&(w.u(),w.d(),w=null);var s=e.lists[0];if(t.lists){for(n=0;n<s.length;n+=1){var l=C(C({},e),{each_value_3:s,list:s[n],list_index_1:n});L[n]?L[n].p(t,l):(L[n]=B(a,l),L[n].c(),L[n].m(g,null))}for(;n<L.length;n+=1)L[n].u(),L[n].d();L.length=s.length}},u:function(){O(n),y&&y.u();for(var t=0;t<x.length;t+=1)x[t].u();for(b&&b.u(),k&&k.u(),w&&w.u(),t=0;t<L.length;t+=1)L[t].u()},d:function(){y&&y.d(),R(x),b&&b.d(),k&&k.d(),w&&w.d(),R(L)}}}(this,this._state),this.root._oncreate.push(function(){(function(){var t=this;setTimeout(function(){t.initialRendering(),window.parent.postMessage({sentinel:"amp",type:"embed-size",height:document.body.scrollHeight},"*")},0)}).call(o),o.fire("update",{changed:{type:1,seats:1,figures2:1,figures:1,configList:1,threshold:1,actualSeats:1,rawList:1,filterList:1,hideAll:1,coalitions:1,title:1,lists:1,visibleTooltip:1,tooltipTop:1,tooltipLeft:1,imagePath:1,bothBranches:1,title2:1,Math:1,seats2:1,simulations:1,dataSource:1},current:o._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),p(this._oncreate))}function M(t){return document.createElement(t)}function j(t,e){e.appendChild(t)}function C(t,e){for(var i in e)t[i]=e[i];return t}function F(t){return document.createTextNode(t)}function E(t,e,i){e.insertBefore(t,i)}function O(t){t.parentNode.removeChild(t)}function R(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function c(){}function k(t,e,i){t.style.setProperty(e,i)}function w(t,e,i){t.addEventListener(e,i,!1)}function z(t,e,i){t.removeEventListener(e,i,!1)}function p(t){for(;t&&t.length;)t.shift()()}function n(t){this.destroy=c,this.fire("destroy"),!(this.set=this.get=c)!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}return C(i.prototype,{destroy:n,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var i=t in this._handlers&&this._handlers[t].slice();if(!i)return;for(var n=0;n<i.length;n+=1){var o=i[n];o.__calling||(o.__calling=!0,o.call(this,e),o.__calling=!1)}},observe:function(e,t,i){var n=t.bind(this);i&&!1===i.init||n(this.get()[e],void 0);return this.on(i&&i.defer?"update":"state",function(t){t.changed[e]&&n(t.current[e],t.previous&&t.previous[e])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var i=this._handlers[t]||(this._handlers[t]=[]);return i.push(e),{cancel:function(){var t=i.indexOf(e);~t&&i.splice(t,1)}}},set:function(t){if(this._set(C({},t)),this.root._lock)return;this.root._lock=!0,p(this.root._beforecreate),p(this.root._oncreate),p(this.root._aftercreate),this.root._lock=!1},teardown:n,_set:function(t){var e=this._state,i={},n=!1;for(var o in t)this._differs(t[o],e[o])&&(i[o]=n=!0);if(!n)return;this._state=C(C({},e),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state);this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:e}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:e}))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"===(void 0===t?"undefined":_typeof(t))||"function"==typeof t}}),C(i.prototype,t),i.prototype._recompute=function(t,e){var i,n,o;(t.type||t.seats)&&this._differs(e.actualSeats,e.actualSeats=(i=e.type,n=e.seats,"seats"===i?n:100))&&(t.actualSeats=!0),t.figures2&&this._differs(e.bothBranches,e.bothBranches=!!e.figures2)&&(t.bothBranches=!0),(t.figures||t.figures2||t.configList||t.threshold)&&this._differs(e.rawList,e.rawList=s(e.figures,e.figures2,e.configList,e.threshold))&&(t.rawList=!0),(t.actualSeats||t.threshold||t.rawList||t.filterList||t.hideAll)&&this._differs(e.lists,e.lists=l(e.actualSeats,e.threshold,e.rawList,e.filterList,e.hideAll))&&(t.lists=!0),(t.rawList||t.coalitions)&&this._differs(e.simulations,e.simulations=(o=e.rawList,e.coalitions.map(function(t){var e={};return e.code=t.split(","),e.label=e.code.map(function(e){return o[0].filter(function(t){return t.id===e}).map(function(t){return t.short_label})}).join(" + "),e})))&&(t.simulations=!0)},i}();